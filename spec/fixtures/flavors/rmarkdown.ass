@1
"```{r}"+
"summary(cars)"+
"```" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      "}": punctuation.md
      "summary(cars)": embedded.source.r
      "```": punctuation.md
    }
  }
}

@2
"```{r, echo=FALSE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      ", "
      "echo=FALSE" {
        rmarkdown.attribute.meta.md {
          "echo": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      "}": punctuation.md
    }
  }
}

@3a
"```{r eval=FALSE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "eval=FALSE" {
        rmarkdown.attribute.meta.md {
          "eval": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      "}": punctuation.md
    }
  }
}

@3b
"```{r eval=FALS}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "eval=FALS"
      "}": punctuation.md
    }
  }
}

@3c
"```{r eval=FALSE echo=TRUE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "eval=FALSE" {
        rmarkdown.attribute.meta.md {
          "eval": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      " echo=TRUE"
      "}": punctuation.md
    }
  }
}

@4a
"```{r, results='asis'}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      ", "
      "results='asis'" {
        rmarkdown.attribute.meta.md {
          "results": key.keyword.md
          "=": punctuation.md
          "'asis'" {
            value.string.md {
              "'": punctuation.md
              "asis"
              "'": punctuation.md
            }
          }
        }
      }
      "}": punctuation.md
    }
  }
}

@4b
# 'duh' is not valid value for the key results
"```{r, results='duh'}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      ", results='duh'"
      "}": punctuation.md
    }
  }
}

@5a
"```{r setup, include=FALSE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "setup": label.string.md
      ", "
      "include=FALSE" {
        rmarkdown.attribute.meta.md {
          "include": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      "}": punctuation.md
    }
  }
}

@5b
"```{r Abc_123}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "Abc_123": label.string.md
      "}": punctuation.md
    }
  }
}

@5c
"```{r Abc-123}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "Abc-123": label.string.md
      "}": punctuation.md
    }
  }
}

@5d
# A period is not a valid part of the label, I think
"```{r Abc.123}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "Abc.123"
      "}": punctuation.md
    }
  }
}

@5e
# Abc is the label, 123 is 'invalid'
"```{r Abc 123}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "Abc": label.string.md
      " "
      "123"
      "}": punctuation.md
    }
  }
}

# @6
# "```{r engine='Rcpp'}"+
# "#include <Rcpp.h>"+
# "```" {
#   text.md {
#     r.fenced.code.md {
#       "```": punctuation.md
#       "{": punctuation.md
#       "r": language.constant.md
#       " "
#       "engine='Rcpp'" {
#         rmarkdown.attribute.meta.md {
#           "engine": key.keyword.md
#           "=": punctuation.md
#           "'Rcpp'" {
#             value.string.md {
#               "'": punctuation.md
#               "Rcpp"
#               "'": punctuation.md
#             }
#           }
#         }
#       }
#       "}": punctuation.md
#       "#include <Rcpp.h>": embedded.source.r
#       "```": punctuation.md
#     }
#   }
# }

@7a
"```{r, results='asis', include=FALSE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      ", "
      "results='asis'" {
        rmarkdown.attribute.meta.md {
          "results": key.keyword.md
          "=": punctuation.md
          "'asis'" {
            value.string.md {
              "'": punctuation.md
              "asis"
              "'": punctuation.md
            }
          }
        }
      }
      ", "
      "include=FALSE" {
        rmarkdown.attribute.meta.md {
          "include": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      "}": punctuation.md
    }
  }
}

@7b
"```{r label results='asis', include=FALSE}" {
  text.md {
    r.fenced.code.md {
      "```": punctuation.md
      "{": punctuation.md
      "r": language.constant.md
      " "
      "label": label.string.md
      " "
      "results='asis'" {
        rmarkdown.attribute.meta.md {
          "results": key.keyword.md
          "=": punctuation.md
          "'asis'" {
            value.string.md {
              "'": punctuation.md
              "asis"
              "'": punctuation.md
            }
          }
        }
      }
      ", "
      "include=FALSE" {
        rmarkdown.attribute.meta.md {
          "include": key.keyword.md
          "=": punctuation.md
          "FALSE": value.constant.md
        }
      }
      "}": punctuation.md
    }
  }
}

# @7c
# "```{r label results='asis' include=FALSE}" {
#   text.md {
#     r.fenced.code.md {
#       "```": punctuation.md
#       "{": punctuation.md
#       "r": language.constant.md
#       " "
#       "label": label.string.md
#       " "
#       "results='asis'"
#       ", "
#       "include=FALSE"
#       "}": punctuation.md
#     }
#   }
# }
